# 阴阳师机制及数据总结

本文件总结了《阴阳师》核心机制与数据，便于后续利用大语言模型进行读取与程序开发。

---

## 0. 术语替换

为了防止版权问题，我希望在实际开发时允许对所有属于进行配置，方便我进行替换。

## 1. 行动条机制

- 行动条总长度 = 全场一速（不论敌我）。
- 初始位置 = 速度。
- 推拉条长度 = 全场一速 × 推拉条比例。
- 推拉条后位置 = 初始位置 + 推拉条长度。
- 若推拉条后位置 < 0，则为 0。
- 距离终点长度 = 全场一速 - 推拉条后位置。
- 到达终点时间 = 距离终点长度 ÷ (速度 + Buff速度)。
- 时间相同：按出场顺序行动。

---

## 2. 回合机制

### 2.1 真回合
- **普通回合**：通过自然跑条/拉条到达末端获得。
  - 推进鬼火条，至第五格时回合结束回复鬼火。
  - 御魂效果（狂骨、木魅等）在回合结束时触发。
- **新回合**：通过技能/御魂额外获得。
  - 不会推进鬼火条。
  - 特殊情况：鬼童丸“修罗”状态、铃鹿御前等。

### 2.2 伪回合
- 非真实回合，不改变当前行动主体。
- 行动条跳至下一单位位置。
- 常见来源：无消耗技能（铃彦姬、玉藻前、帝释天等）。
- 伪回合不会触发部分反击，但可能触发特殊机制（海忍、跳哥等）。

### 2.3 行动顺序逻辑
1. 跑条到达末端优先于拉条。
2. 同为拉条：速度高者优先。
3. 同为跑条：速度慢的己方优先（怪物例外）。
4. 怪物与己方同时到达：速度高者优先，若相同则站位靠后者优先。
5. 新回合/伪回合：后生效的技能优先。

---

## 3. 式神属性成长

### 3.1 属性计算公式
- HP = 成长值 × 成长点 + 1
- 攻击 = 成长值 × 成长点
- 防御 = 成长值 × 成长点

### 3.2 核心说明
- **成长值**：每个式神独立（觉醒/未觉醒不同）。
- **成长点**：通用，随等级提升分配。
- **面板属性** = 成长值 × 成长点。
- 可通过“三围属性点 / 100”得到成长值。

---

## 4. 御魂机制

### 4.1 副属性成长
- **类别一（速度、暴击、生命%、攻击%、防御%）**
  - 每次成长 2.4% ~ 3.0%
  - 五次加满：14.4% ~ 18.0%（期望 ~16.2%）
- **类别二（爆伤、命中、抵抗）**
  - 每次成长 3.2% ~ 4.0%
  - 五次加满：19.2% ~ 24.0%（期望 ~21.6%）

### 4.2 随机分布
- 成长由固定部分 + 随机部分组成。
- 随机部分符合 Irwin-Hall(n) 分布，可计算概率区间。

---

## 5. 伤害计算公式

```
总伤害 = (基础攻击 × (1 + 攻击增减) + 御魂攻击)
        × 暴击伤害
        × (1 + 伤害增减 + 承受伤害增减)
        × (300 / (300 + (1 - 无视防御) × (敌方防御 - 忽略防御) × (1 + 防御增减)))
```

---

## 参考来源
- NGA玩家社区机制解析
- 痒痒鼠宝典
- bbs.nga.cn 数据帖

---
